<div class="w-full">
  <!-- Header with Profile Photo and name-->
  <div
    *ngIf="!expanded"
    class="relative mx-dl-5 mt-dl-3 flex h-dl-9 items-center border-b-2 border-dl-grey-9 pb-dl-4"
  >
    <!-- Profile Icon -->
    <button
      type="button"
      class="flex shrink-0 rounded-full bg-dl-grey-10 text-sm focus:outline-none focus:ring-2 focus:ring-dl-blue-6 focus:ring-offset-2"
      id="user-profile-image"
      aria-expanded="false"
      aria-haspopup="true"
    >
      <span class="sr-only">Expand Profile Image</span>
      <img
        *ngIf="profileImageLink"
        (click)="toggleExpand()"
        class="h-dl-7 w-dl-7 rounded-full"
        [src]="profileImageLink"
        alt="profile image"
      />
      <span
        class="inline-flex h-dl-7 w-dl-7 items-center justify-center rounded-full bg-dl-grey-9"
        *ngIf="!profileImageLink && initials"
        (click)="updatePhoto()"
      >
        <span class="text-dl-7 font-dl-3 leading-none text-dl-grey-7">{{
          initials
        }}</span>
      </span>
      <span
        *ngIf="!profileImageLink && !initials"
        class="inline-block h-dl-7 w-dl-7 overflow-hidden rounded-full bg-dl-grey-9"
        (click)="updatePhoto()"
      >
        <svg
          class="h-full w-full text-dl-grey-7"
          fill="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            d="M24 20.993V24H0v-2.996A14.977 14.977 0 0112.004 15c4.904 0 9.26 2.354 11.996 5.993zM16.002 8.999a4 4 0 11-8 0 4 4 0 018 0z"
          />
        </svg>
      </span>
    </button>
    <!-- Name -->
    <div
      *ngIf="profile.name_first || profile.name_last"
      class="flex shrink-0 flex-col"
    >
      <span class="ml-dl-7 text-dl-8 font-dl-3 text-dl-grey-2">
        {{ profile.name_first }} {{ profile.name_last }}
      </span>
      <span
        *ngIf="profile.joined_at"
        class="ml-dl-7 text-dl-6 font-dl-1 text-dl-grey-4"
        >Member since {{ profile.joined_at | date : "MMM y" }}</span
      >
    </div>
    <!-- Photo Selection -->
    <div
      id="photo-profile"
      class="border-1 max-w-1 absolute -bottom-10 right-10 h-dl-6 w-dl-6 rounded-full bg-dl-grey-9"
      (click)="updatePhoto()"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        version="1.1"
        xmlns:xlink="http://www.w3.org/1999/xlink"
        width="180"
        height="180"
        x="0"
        y="0"
        viewBox="11.8 11.7 19 19"
        xml:space="preserve"
      >
        <g
          transform="matrix(0.13000000000000003,0,0,0.13000000000000003,13.92,13.575044696331023)"
        >
          <path
            d="M28.794 10.474a1 1 0 0 0-.82 1.151c.021.125.026.25.026.375v12c0 1.654-1.346 3-3 3H7c-1.654 0-3-1.346-3-3V12c0-1.654 1.346-3 3-3h3a1 1 0 0 0 1-1c0-1.654 1.346-3 3-3h4c.403 0 .81.085 1.18.247a1 1 0 0 0 .8-1.833A4.989 4.989 0 0 0 18 3h-4a5.009 5.009 0 0 0-4.9 4H7c-2.757 0-5 2.243-5 5v12c0 2.757 2.243 5 5 5h18c2.757 0 5-2.243 5-5V12c0-.235-.015-.47-.054-.706a.997.997 0 0 0-1.152-.82z"
            fill="#394D60"
            opacity="1"
            data-original="#000000"
            class=""
          ></path>
          <path
            d="M16 11c-3.86 0-7 3.14-7 7s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm0 12c-2.757 0-5-2.243-5-5s2.243-5 5-5 5 2.243 5 5-2.243 5-5 5zM26 2.207a1 1 0 0 0-1 1V5h-1.793a1 1 0 1 0 0 2H25v1.793a1 1 0 1 0 2 0V7h1.793a1 1 0 1 0 0-2H27V3.207a1 1 0 0 0-1-1z"
            fill="#394D60"
            opacity="1"
            data-original="#000000"
            class=""
          ></path>
        </g>
      </svg>
    </div>
  </div>

  <!-- Expanded View-->
  <div *ngIf="expanded">
    <img
      *ngIf="profileImageLink"
      class="w-full object-cover"
      [src]="profileImageLink"
      alt="profile image"
      (click)="toggleExpand()"
    />
  </div>

  <!-- Account Details inc username, email, city, state-->
  <div class="items-left mt-dl-3 flex flex-col bg-white pb-dl-3">
    <span class="ml-dl-5 mt-dl-5 text-dl-7 font-dl-2 text-dl-blue-5"
      >Account</span
    >

    <!--First Name-->
    <div
      (click)="updateProfile('name_first')"
      *ngIf="profile.name_first"
      class="ml-dl-5 mt-dl-4 flex flex-col"
    >
      <span class="text-dl-6 font-dl-2 text-dl-grey-2">{{
        profile.name_first
      }}</span>
      <span class="mt-dl-1 text-dl-5 font-dl-1 text-dl-grey-7">First Name</span>
    </div>
    <div
      (click)="updateProfile('name_first')"
      *ngIf="!profile.name_first"
      class="ml-dl-5 mt-dl-4 flex flex-col"
    >
      <span class="text-dl-6 font-dl-2 text-dl-grey-6">First Name</span>
      <span class="mt-dl-1 text-dl-5 font-dl-1 text-dl-grey-7"
        >Tap to add First Name</span
      >
    </div>

    <!--Last Name-->
    <div
      (click)="updateProfile('name_last')"
      *ngIf="profile.name_last"
      class="ml-dl-5 mt-dl-4 flex flex-col"
    >
      <span class="text-dl-6 font-dl-2 text-dl-grey-2">{{
        profile.name_last
      }}</span>
      <span class="mt-dl-1 text-dl-5 font-dl-1 text-dl-grey-7">Last Name</span>
    </div>
    <div
      (click)="updateProfile('name_last')"
      *ngIf="!profile.name_last"
      class="ml-dl-5 mt-dl-4 flex flex-col"
    >
      <span class="text-dl-6 font-dl-2 text-dl-grey-6">Last Name</span>
      <span class="mt-dl-1 text-dl-5 font-dl-1 text-dl-grey-7"
        >Tap to add Last Name</span
      >
    </div>

    <!--Email-->
    <div *ngIf="profile.email" class="ml-dl-5 mt-dl-4 flex flex-col">
      <span class="text-dl-6 font-dl-2 text-dl-grey-2">{{
        profile.email
      }}</span>
      <span class="mt-dl-1 text-dl-5 font-dl-1 text-dl-grey-7">Email</span>
    </div>
    <div *ngIf="!profile.email" class="ml-dl-5 mt-dl-4 flex flex-col">
      <span class="text-dl-6 font-dl-2 text-dl-grey-6">Email</span>
      <span class="mt-dl-1 text-dl-5 font-dl-1 text-dl-grey-7"
        >Tap to add Email</span
      >
    </div>

    <!--Username-->
    <div *ngIf="profile.username" class="ml-dl-5 mt-dl-4 flex flex-col">
      <span class="text-dl-6 font-dl-2 text-dl-grey-2">{{
        profile.username
      }}</span>
      <span class="mt-dl-1 text-dl-5 font-dl-1 text-dl-grey-7">Username</span>
    </div>
    <div *ngIf="!profile.username" class="ml-dl-5 mt-dl-4 flex flex-col">
      <span class="text-dl-6 font-dl-2 text-dl-grey-6">Username</span>
      <span class="mt-dl-1 text-dl-5 font-dl-1 text-dl-grey-7"
        >Tap to add Username</span
      >
    </div>

    <!--City-->
    <div
      (click)="updateProfile('city')"
      *ngIf="profile.city"
      class="ml-dl-5 mt-dl-4 flex flex-col"
    >
      <span class="text-dl-6 font-dl-2 text-dl-grey-2">{{ profile.city }}</span>
      <span class="mt-dl-1 text-dl-5 font-dl-1 text-dl-grey-7">City</span>
    </div>
    <div
      (click)="updateProfile('city')"
      *ngIf="!profile.city"
      class="ml-dl-5 mt-dl-4 flex flex-col"
    >
      <span class="text-dl-6 font-dl-2 text-dl-grey-6">City</span>
      <span class="mt-dl-1 text-dl-5 font-dl-1 text-dl-grey-7"
        >Tap to add City</span
      >
    </div>

    <!--State-->
    <div
      (click)="updateProfile('state')"
      *ngIf="profile.city"
      class="ml-dl-5 mt-dl-4 flex flex-col"
    >
      <span class="text-dl-6 font-dl-2 text-dl-grey-2">{{
        profile.state
      }}</span>
      <span class="mt-dl-1 text-dl-5 font-dl-1 text-dl-grey-7">State</span>
    </div>
    <div
      (click)="updateProfile('state')"
      *ngIf="!profile.city"
      class="ml-dl-5 mt-dl-4 flex flex-col"
    >
      <span class="text-dl-6 font-dl-2 text-dl-grey-6">State</span>
      <span class="mt-dl-1 text-dl-5 font-dl-1 text-dl-grey-7"
        >Tap to add State</span
      >
    </div>
  </div>

  <!-- Settings-->
  <div class="items-left mt-dl-3 flex flex-col bg-white pb-dl-3">
    <span class="ml-dl-5 mt-dl-5 text-dl-7 font-dl-2 text-dl-blue-5"
      >Settings</span
    >
  </div>
</div>
