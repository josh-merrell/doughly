<div class="flex h-full w-full items-center flex-col bg-white py-dl-8 px-dl-2 sm:px-dl-6 lg:px-dl-8">
  <mat-spinner
    class="my-app-custom-spinner w-full"
    [diameter]="84"
    *ngIf="isLoading()"
  ></mat-spinner>
  <div *ngIf="!isLoading()">
    <div class="flex flex-grow"></div>
    <div class="xm:w-full sm:mx-auto sm:max-w-md">
      <img
        class="mx-auto h-10 w-auto"
        src="https://tailwindui.com/img/logos/mark.svg?color=indigo&shade=600"
        alt="doughleap logo"
      />
    </div>

    <!--main card-->
    <form
      [formGroup]="password_reset_form"
      (ngSubmit)="onSubmit()"
      class="flex flex-col items-center"
    >
      <div class="relative mb-dl-5 flex flex-col">
        <div class="mt-dl-4 text-center">
          <!-- <h3 class="leading-dl-4 text-dl-6 font-dl-3 text-dl-grey-3">Sign In</h3> -->
        </div>
      </div>
      <!--FORM FIELDS-->
      <div id="form-newPassword">
        <div class="relative flex flex-col">
          <label class="text-dl-4 font-dl-3 text-dl-grey-5" for="newPassword"
            >New Password</label
          >
          <mat-form-field class="w-full" [style.width.px]="296">
            <input matInput type="email" formControlName="newPassword" />
            <mat-error
              *ngIf="
                password_reset_form.get('newPassword')!.touched &&
                password_reset_form.get('newPassword')!.invalid
              "
            >
              Please enter a valid email.
            </mat-error>
          </mat-form-field>
        </div>
      </div>

      <div id="form-confirmPassword">
        <div class="relative flex flex-col">
          <label class="text-dl-4 font-dl-3 text-dl-grey-5" for="confirmPassword"
            >Confirm Password</label
          >
          <mat-form-field class="w-full" [style.width.px]="296">
            <input matInput type="email" formControlName="confirmPassword" />
            <mat-error
              *ngIf="
                password_reset_form.get('confirmPassword')!.touched &&
                password_reset_form.get('confirmPassword')!.invalid
              "
            >
              Please enter a valid email.
            </mat-error>
            <mat-error
              *ngIf="
                password_reset_form.get('confirmPassword')!.touched &&
                password_reset_form.get('confirmPassword')! !== password_reset_form.get('newPassword')!
              "
            >
              Passwords must match.
            </mat-error>
          </mat-form-field>
        </div>
      </div>
      <!---->
      <button
        type="submit"
        [disabled]="
          password_reset_form.invalid ||
          password_reset_form.get('newPassword')!.touched === false ||
          password_reset_form.get('confirmPassword')!.touched === false
        "
        style="height: 40px; width: 296px"
        class="shadow-s mt-dl-5 inline-flex items-center justify-center rounded-dl-1 text-dl-5 font-dl-2 text-white"
        [ngClass]="{
          'cursor-pointer bg-dl-blue-4 hover:bg-dl-blue-5':
          password_reset_form.invalid === false &&
            password_reset_form.get('newPassword')!.touched &&
            password_reset_form.get('confirmPassword')!.touched,
          'bg-dl-grey-7':
          password_reset_form.invalid ||
          password_reset_form.get('newPassword')!.touched === false ||
          password_reset_form.get('confirmPassword')!.touched === false
        }"
      >
        Save New Password
      </button>
    </form>

    <!-- Space Div -->
    <div class="flex flex-grow"></div>
    <p *ngIf="failureMessage()" class="mt-dl-4 text-center text-dl-5 text-dl-red-5">
      {{failureMessage()}}
    </p>
    <p *ngIf="successMessage()" class="mt-dl-4 text-center text-dl-5 text-dl-teal-4">
      {{successMessage()}}
    </p>
    <p class="mt-dl-4 text-center text-dl-5 text-dl-grey-4">
      New here?
      <a
        class="ml-dl-2 cursor-pointer text-dl-5 font-dl-3 leading-dl-2 text-dl-blue-5"
        routerLink="/register"
        >Create an account</a
      >
    </p>
  </div>
</div>
