<script src="https://accounts.google.com/gsi/client" async></script>
<div class="flex h-full flex-col bg-white py-dl-8 sm:px-dl-6 lg:px-dl-8">
  <div class="flex flex-grow"></div>
  <div class="xm:w-full sm:mx-auto sm:max-w-md">
    <img
      class="mx-auto h-10 w-auto"
      src="https://tailwindui.com/img/logos/mark.svg?color=indigo&shade=600"
      alt="doughleap logo"
    />
  </div>

  <!--main card-->
  <form
    [formGroup]="login_form"
    (ngSubmit)="onSubmit()"
    class="flex flex-col items-center"
  >
    <div class="relative mb-dl-5 flex flex-col">
      <div class="mt-dl-4 text-center">
        <!-- <h3 class="leading-dl-4 text-dl-6 font-dl-3 text-dl-grey-3">Sign In</h3> -->
      </div>
    </div>
    <!-- OAuth Sign In -->
    <div class="mb-dl-7 flex w-full flex-col items-center justify-between">
      <button (click)="signInWithGoogle()" class="gsi-material-button">
        <div class="gsi-material-button-state"></div>
        <div class="gsi-material-button-content-wrapper">
          <div class="gsi-material-button-icon">
            <svg
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 48 48"
              xmlns:xlink="http://www.w3.org/1999/xlink"
              style="display: block"
            >
              <path
                fill="#EA4335"
                d="M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"
              ></path>
              <path
                fill="#4285F4"
                d="M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"
              ></path>
              <path
                fill="#FBBC05"
                d="M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"
              ></path>
              <path
                fill="#34A853"
                d="M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"
              ></path>
              <path fill="none" d="M0 0h48v48H0z"></path>
            </svg>
          </div>
          <span class="gsi-material-button-contents">Sign in with Google</span>
          <span style="display: none">Sign in with Google</span>
        </div>
      </button>
      <button
        *ngIf="isWeb()"
        (click)="signInWithFacebook()"
        class="gsi-material-button mt-dl-2"
      >
        <div class="gsi-material-button-state"></div>
        <div class="gsi-material-button-content-wrapper">
          <div class="gsi-material-button-icon flex items-center">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              xmlns:xlink="http://www.w3.org/1999/xlink"
              enable-background="new 0 0 56.693 56.693"
              id="Layer_1"
              fill="#1877F2"
              version="1.1"
              height="20px"
              width="20px"
              viewBox="5 4 48 50"
              xml:space="preserve"
            >
              <path
                d="M40.43,21.739h-7.645v-5.014c0-1.883,1.248-2.322,2.127-2.322c0.877,0,5.395,0,5.395,0V6.125l-7.43-0.029  c-8.248,0-10.125,6.174-10.125,10.125v5.518h-4.77v8.53h4.77c0,10.947,0,24.137,0,24.137h10.033c0,0,0-13.32,0-24.137h6.77  L40.43,21.739z"
              />
            </svg>
          </div>
          <span class="gsi-material-button-contents"
            >Sign in with Facebook</span
          >
          <span style="display: none">Sign in with Facebook</span>
        </div>
      </button>
    </div>
    <!--FORM FIELDS-->
    <div id="form-email">
      <div class="relative flex flex-col">
        <label class="text-dl-4 font-dl-3 text-dl-grey-5" for="email"
          >Email</label
        >
        <mat-form-field class="w-full" [style.width.px]="296">
          <input matInput type="email" formControlName="email" />
          <mat-error
            *ngIf="
              login_form.get('email')!.touched &&
              login_form.get('email')!.invalid
            "
          >
            Please enter a valid email.
          </mat-error>
        </mat-form-field>
      </div>
    </div>

    <div id="form-password" class="mb-dl-3">
      <div class="relative flex flex-col">
        <label class="text-dl-4 font-dl-3 text-dl-grey-5" for="email"
          >Password</label
        >
        <mat-form-field class="w-full" [style.width.px]="296">
          <input matInput type="password" formControlName="password" />
        </mat-form-field>
      </div>
    </div>

    <!---->

    <div class="mx-dl-2 flex items-center justify-between" style="width: 296px">
      <!-- Remember Me Checkbox-->
      <div class="flex items-center">
        <input
          id="remember-md"
          name="remember-me"
          type="checkbox"
          class="h-dl-3 w-dl-3 rounded border-dl-grey-8 text-dl-blue-6"
        />
        <label
          for="remember me"
          class="ml-dl-3 text-dl-5 font-dl-3 text-dl-grey-5"
          >Remember me</label
        >
      </div>
      <!-- Forgot Password Link-->
      <div class="leading-dl-6 text-dl-2">
        <a
          class="cursor-pointer text-dl-5 font-dl-3 text-dl-blue-5 hover:text-dl-blue-5"
          routerLink="/password-reset"
          >Forgot password?</a
        >
      </div>
    </div>

    <button
      type="submit"
      [disabled]="login_form.invalid || login_form.get('email')!.touched === false || login_form.get('password')!.touched === false || login_form.get('password')!.value === '' || login_form.get('email')!.value === ''"
      style="height: 40px; width: 296px"
      class="shadow-s mt-dl-5 inline-flex items-center justify-center rounded-dl-1 text-dl-5 font-dl-2 text-white"
      [ngClass]="{
        'cursor-pointer bg-dl-blue-4 hover:bg-dl-blue-5':
          login_form.invalid === false && login_form.get('email')!.touched && login_form.get('password')!.touched,
        'bg-dl-grey-7': login_form.invalid || login_form.get('email')!.touched === false || login_form.get('password')!.touched === false || login_form.get('password')!.value === '' || login_form.get('email')!.value === ''
      }"
    >
      Sign In with Email
    </button>
  </form>

  <div style="color: red" *ngIf="error">{{ error }}</div>

  <!-- Space Div -->
  <div class="flex flex-grow"></div>
  <p class="mt-dl-7 text-center text-dl-5 text-dl-grey-4">
    New here?
    <a
      class="ml-dl-2 cursor-pointer text-dl-5 font-dl-3 leading-dl-2 text-dl-blue-5"
      routerLink="/register"
      >Create an account</a
    >
  </p>
</div>
