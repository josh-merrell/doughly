<div class="flex h-full w-full flex-col bg-white pt-dl-4 dark:bg-dl-grey-1">
  <div class="mb-dl-3 flex w-full flex-row-reverse pr-dl-5">
    <span
      class="inline-flex items-center border-b-4 border-dl-blue-8 text-dl-7 font-dl-3 text-dl-grey-2 transition-all duration-100 ease-in-out dark:border-dl-blue-3 dark:text-dl-grey-9"
      >Settings</span
    >
  </div>
  <div *ngIf="isEditing" class="flex h-full w-full items-center justify-center">
    <mat-spinner class="my-app-custom-spinner"></mat-spinner>
  </div>

  <!--FORM FIELDS-->
  <div *ngIf="!isEditing" class="flex-grow overflow-y-auto px-dl-4">
    <form class="h-full" [formGroup]="form" (ngSubmit)="onSubmit()">
      <div class="flex h-full flex-col">
        <div class="mb-dl-2 mt-dl-3 flex-grow overflow-y-auto">
          <!-- Check Ingredient Stock -->
          <div
            id="form-checkIngredientStock"
            class="relative mt-dl-2 flex flex-row items-center"
          >
            <mat-slide-toggle
              formControlName="checkIngredientStock"
              class="select-slider"
            ></mat-slide-toggle>
            <span
              class="px-dl-3 py-dl-3 text-dl-4 text-dl-grey-2 dark:text-dl-grey-9"
              >Check Kitchen inventory when adding a recipe to a shopping list
              and deduct inventory when using a recipe</span
            >
          </div>

          <!-- Auto Delete Expired Stock-->
          <div
            id="form-autoDeleteExpiredStock"
            class="relative mt-dl-2 flex flex-row items-center"
          >
            <mat-slide-toggle formControlName="autoDeleteExpiredStock">
            </mat-slide-toggle>
            <span
              class="px-dl-3 py-dl-3 text-dl-4 text-dl-grey-2 dark:text-dl-grey-9"
              >Delete Ingredient Inventory from your kitchen when it expires,
              based on your Ingredient Lifespan setting</span
            >
          </div>
          <!-- Dark Mode-->
          <div
            id="form-darkMode"
            class="relative mt-dl-2 flex flex-row items-center"
          >
            <span
              class="px-dl-3 py-dl-3 text-dl-4 text-dl-grey-2 dark:text-dl-grey-9"
              >Dark Mode</span
            >
            <mat-select formControlName="darkMode">
              <mat-option
                *ngFor="let option of darkModeOptions"
                [value]="option"
              >
                {{ option }}
              </mat-option>
            </mat-select>
          </div>

          <!-- Notifications -->
          <h3
            class="mt-dl-5 text-dl-6 font-dl-3 text-dl-grey-3 dark:text-dl-grey-8"
          >
            Notifications
          </h3>
          <div class="flex flex-col">
            <!-- Notify on Low Ingredient Stock -->
            <div
              id="form-notifyOnLowStock"
              class="relative mt-dl-2 flex flex-row items-center"
            >
              <span
                class="max-w-dl-10 py-dl-3 pl-dl-1 pr-dl-2 text-dl-4 text-dl-grey-2 dark:text-dl-grey-9"
                >When an ingredient is low in stock</span
              >
              <mat-form-field>
                <mat-select formControlName="notifyOnLowStock">
                  <mat-option
                    *ngFor="let method of notificationMethods"
                    [value]="method"
                  >
                    {{ method }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>

            <!-- Notify on No Stock -->
            <div
              id="form-notifyOnNoStock"
              class="relative mt-dl-2 flex flex-row items-center"
            >
              <span
                class="max-w-dl-10 py-dl-3 pl-dl-1 pr-dl-2 text-dl-4 text-dl-grey-2 dark:text-dl-grey-9"
                >When an ingredient has no more stock</span
              >
              <mat-form-field>
                <mat-select formControlName="notifyOnNoStock">
                  <mat-option
                    *ngFor="let method of notificationMethods"
                    [value]="method"
                  >
                    {{ method }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>

            <!-- Notify on Upcoming Expiration -->
            <div
              id="form-notifyUpcomingStockExpiry"
              class="relative mt-dl-2 flex flex-row items-center"
            >
              <span
                class="max-w-dl-10 py-dl-3 pl-dl-1 pr-dl-2 text-dl-4 text-dl-grey-2 dark:text-dl-grey-9"
                >When an ingredient stock is three days from expiration</span
              >
              <mat-form-field>
                <mat-select formControlName="notifyUpcomingStockExpiry">
                  <mat-option
                    *ngFor="let method of notificationMethods"
                    [value]="method"
                  >
                    {{ method }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>

            <!-- Notify on Expired Stock -->
            <div
              id="form-notifyExpiredStock"
              class="relative mt-dl-2 flex flex-row items-center"
            >
              <span
                class="max-w-dl-10 py-dl-3 pl-dl-1 pr-dl-2 text-dl-4 text-dl-grey-2 dark:text-dl-grey-9"
                >When an ingredient stock has expired</span
              >
              <mat-form-field>
                <mat-select formControlName="notifyExpiredStock">
                  <mat-option
                    *ngFor="let method of notificationMethods"
                    [value]="method"
                  >
                    {{ method }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <!-- Notify Friend Created Recipe -->
            <div
              id="form-notifyFriendCreatedRecipe"
              class="relative mt-dl-2 flex flex-row items-center"
            >
              <span
                class="max-w-dl-10 py-dl-3 pl-dl-1 pr-dl-2 text-dl-4 text-dl-grey-2 dark:text-dl-grey-9"
                >When a friend creates a recipe</span
              >
              <mat-form-field>
                <mat-select formControlName="notifyFriendCreateRecipe">
                  <mat-option
                    *ngFor="let method of notificationMethods"
                    [value]="method"
                  >
                    {{ method }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>

            <!-- Notify Followee Created Recipe -->
            <div
              id="form-notifyFolloweeCreatedRecipe"
              class="relative mt-dl-2 flex flex-row items-center"
            >
              <span
                class="max-w-dl-10 py-dl-3 pl-dl-1 pr-dl-2 text-dl-4 text-dl-grey-2 dark:text-dl-grey-9"
                >When someone you follow creates a recipe</span
              >
              <mat-form-field>
                <mat-select formControlName="notifyFolloweeCreateRecipe">
                  <mat-option
                    *ngFor="let method of notificationMethods"
                    [value]="method"
                  >
                    {{ method }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>

            <!-- Notify on New Friend Reqest -->
            <div
              id="form-notifyFriendRequest"
              class="relative mt-dl-2 flex flex-row items-center"
            >
              <span
                class="max-w-dl-10 py-dl-3 pl-dl-1 pr-dl-2 text-dl-4 text-dl-grey-2 dark:text-dl-grey-9"
                >When you receive a friend request</span
              >
              <mat-form-field>
                <mat-select formControlName="notifyFriendRequest">
                  <mat-option
                    *ngFor="let method of notificationMethods"
                    [value]="method"
                  >
                    {{ method }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>

            <!-- Notify on New Follower -->
            <div
              id="form-notifyNewFollower"
              class="relative mt-dl-2 flex flex-row items-center"
            >
              <span
                class="max-w-dl-10 py-dl-3 pl-dl-1 pr-dl-2 text-dl-4 text-dl-grey-2 dark:text-dl-grey-9"
                >When someone follows you</span
              >
              <mat-form-field>
                <mat-select formControlName="notifyNewFollower">
                  <mat-option
                    *ngFor="let method of notificationMethods"
                    [value]="method"
                  >
                    {{ method }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>
        </div>

        <div class="w-full">
          <button
            type="button"
            class="mb-dl-2 block h-dl-5 w-full whitespace-nowrap rounded-dl-1 border px-dl-1 py-dl-1 text-dl-5 font-dl-3 text-white shadow-lg transition-all duration-200 ease-in-out dark:text-dl-grey-1"
            [class.cursor-pointer]="form.valid && !form.pristine"
            [ngClass]="{
              'cursor-pointer  bg-dl-pink-4 hover:bg-dl-pink-5 dark:border-dl-pink-7 dark:bg-dl-pink-7 hover:dark:bg-dl-pink-6':
                form.valid && !form.pristine,
              'bg-dl-grey-7 dark:border-dl-grey-4  dark:bg-dl-grey-4 ':
                !form.valid || form.pristine
            }"
            [disabled]="!form.valid || form.pristine"
            (click)="onSubmit()"
          >
            Save Changes
          </button>
        </div>
      </div>
    </form>
  </div>
</div>
